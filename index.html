<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>CEO Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
/* =====================
   BASE
===================== */
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", sans-serif;
  background: #ffffff;
  color: #111;
}

.container {
  max-width: 1200px;
  margin: 40px auto;
  padding: 0 20px;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #e5e5e5;
  padding-bottom: 16px;
  margin-bottom: 24px;
}

header h1 {
  font-size: 18px;
  font-weight: 600;
}

header span {
  font-size: 14px;
  color: #666;
}

.section {
  border: 1px solid #eaeaea;
  padding: 16px;
  box-sizing: border-box;
}

.section h2 {
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 12px;
}

/* =====================
   MAIL MATRIX
===================== */
.mail-section {
  margin-bottom: 40px;
}

.mail-matrix {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
}

.mail-box {
  border: 1px solid #e5e5e5;
  padding: 12px 14px;
  min-height: 220px;
  display: flex;
  flex-direction: column;
}

.mail-box h3 {
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 8px;
}

.mail-list {
  font-size: 13px;
  line-height: 1.6;
  overflow-y: auto;
  flex: 1;
}

/* =====================
   DASHBOARD GRID (í•µì‹¬)
===================== */
.dashboard-grid {
  display: grid;
  grid-template-columns: 1.1fr 1.6fr 1.1fr;
  grid-template-areas:
    "today checklist yesterday"
    "news  news      calendar";
  gap: 24px;
}

/* ì˜ì—­ ë§¤í•‘ */
.today { grid-area: today; }
.checklist { grid-area: checklist; }
.yesterday { grid-area: yesterday; }
.news { grid-area: news; }
.calendar-box { grid-area: calendar; }

/* ë†’ì´ ê¸°ì¤€ */
.today, .news { min-height: 300px; }
.checklist { min-height: 520px; }
.yesterday { min-height: 240px; }
.calendar-box { min-height: 300px; }

/* =====================
   NEWS
===================== */
.news-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}

.news-header button {
  font-size: 12px;
  padding: 4px 10px;
  border: 1px solid #ddd;
  background: #fff;
  cursor: pointer;
}

.news-meta {
  font-size: 11px;
  color: #999;
  margin-bottom: 10px;
}

/* =====================
   MOBILE
===================== */
@media (max-width: 768px) {
  .container {
    margin: 20px auto;
    padding: 0 12px;
  }

  .mail-matrix {
    grid-template-columns: 1fr;
  }

  .dashboard-grid {
    grid-template-columns: 1fr;
    grid-template-areas:
      "today"
      "checklist"
      "yesterday"
      "calendar"
      "news";
  }

  header {
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
  }
}
</style>
</head>

<body>
<div class="container">

<header>
  <h1>CEO Dashboard</h1>
  <span id="today"></span>
</header>

<!-- MAIL -->
<div class="section mail-section">
  <h2>MAIL</h2>
  <div class="mail-matrix">
    <div class="mail-box">
      <h3>ì—…ë¬´ ì§€ë©”ì¼</h3>
      <div id="mail_gmail_company" class="mail-list"></div>
    </div>
    <div class="mail-box">
      <h3>ê°œì¸ ì§€ë©”ì¼</h3>
      <div id="mail_gmail_personal" class="mail-list"></div>
    </div>
    <div class="mail-box">
      <h3>ì—…ë¬´ ë„¤ì´ë²„</h3>
      <div id="mail_naver_company" class="mail-list">
        <small>ì§€ë©”ì¼ ì „ë‹¬ ì˜ˆì •</small>
      </div>
    </div>
    <div class="mail-box">
      <h3>ê°œì¸ ë„¤ì´ë²„</h3>
      <div id="mail_naver_personal" class="mail-list">
        <small>ì§€ë©”ì¼ ì „ë‹¬ ì˜ˆì •</small>
      </div>
    </div>
  </div>
</div>

<!-- DASHBOARD -->
<div class="dashboard-grid">

  <div class="section today">
    <h2>TODAY TASKS</h2>
    <div id="todayTasks"></div>
    <input type="text" id="newTodayTask" placeholder="ì—…ë¬´ ì¶”ê°€ í›„ Enter" />
  </div>

  <div class="section checklist">
    <h2>CHECK LIST</h2>
    <div id="checkList"></div>
    <input type="text" id="newCheckItem" placeholder="ì²´í¬ í•­ëª© ì¶”ê°€ í›„ Enter" />
  </div>

  <div class="section yesterday">
    <h2>YESTERDAY</h2>
    <div id="yesterdayTasks"></div>
  </div>

  <div class="section news">
    <div class="news-header">
      <h2>ECONOMIC NEWS</h2>
      <button id="newsRefresh">ìƒˆë¡œê³ ì¹¨</button>
    </div>
    <div class="news-meta">
      ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span id="newsUpdated">-</span>
    </div>
    <strong>ì—í”„ìœ í”¼ê¸€ë¡œë²ŒíŒŒíŠ¸ë„ˆìŠ¤</strong>
    <div id="news_fup"></div>
    <br/>
    <strong>ì™€ì´ë‚«ê¸€ë¡œë²Œì´ë‹ˆì…”í‹°ë¸Œ</strong>
    <div id="news_whynot"></div>
  </div>

  <div class="section calendar-box">
    <h2>CALENDAR</h2>
    <div>
      09:00 ë‚´ë¶€ ë¯¸íŒ…<br/>
      13:00 ì™¸ë¶€ ë¯¸íŒ…<br/>
      16:30 ì „í™” ë¯¸íŒ…
    </div>
  </div>

</div>

<small>Private Â· CEO Only</small>

</div>
   <div id="lockScreen">
  <div class="lock-box">
    <h2>CEO Dashboard</h2>
    <input type="password" id="pinInput" placeholder="PIN ì…ë ¥" />
    <button onclick="unlock()">í™•ì¸</button>
  </div>
</div>
<script>
/* =====================
   GLOBAL
===================== */
const PIN_CODE = '0925';

/* =====================
   PIN UNLOCK
===================== */
function unlock() {
  const input = document.getElementById('pinInput').value;
  if (input === PIN_CODE) {
    localStorage.setItem('ceo_unlocked', 'true');
    document.getElementById('lockScreen').style.display = 'none';
    initDashboard(); // ğŸ”¥ ì ê¸ˆ í•´ì œ í›„ ì´ˆê¸°í™”
  } else {
    alert('PINì´ í‹€ë ¸ìŠµë‹ˆë‹¤.');
  }
}

/* =====================
   MAIL API
===================== */
const MAIL_APIS = {
  gmail_personal: {
    url: 'https://script.google.com/macros/s/AKfycbxPt7-RQromTNCVGjk1KW9UIf9hj6voRQEjJrlmZNy_oA3CHI03apedJWrDCbvpUU9njg/exec',
    target: 'mail_gmail_personal'
  },
  gmail_company: {
    url: 'https://script.google.com/macros/s/AKfycbyXlpoE7c6MGH-uzEBwsTzoEVZf_GNBvJGe-gSRBk_uaZdl6TIDpglDqS6uamBQ5XAQ/exec',
    target: 'mail_gmail_company'
  }
};

function renderMail(api) {
  const box = document.getElementById(api.target);
  if (!box) return;

  box.textContent = 'ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦';

  fetch(api.url)
    .then(res => res.json())
    .then(data => {
      box.innerHTML = '';

      if (!data || data.length === 0) {
        box.textContent = 'ì½ì§€ ì•Šì€ ë©”ì¼ ì—†ìŒ';
        return;
      }

      data.slice(0, 6).forEach(mail => {
        const fromName = mail.from.split('<')[0].replace(/"/g, '').trim();
        const isNaver = mail.from.includes('@naver');
        const subject =
          mail.subject.length > 36
            ? mail.subject.slice(0, 36) + 'â€¦'
            : mail.subject;

        const row = document.createElement('div');
        row.style.marginBottom = '8px';

        const strong = document.createElement('strong');
        strong.innerHTML =
          fromName +
          (isNaver
            ? `<span style="margin-left:6px;font-size:11px;background:#2DB400;color:#fff;padding:2px 6px;border-radius:4px;">NAVER</span>`
            : '');

        const br = document.createElement('br');

        const link = document.createElement('a');
        link.href = mail.link;
        link.target = '_blank';
        link.textContent = subject;
        link.style.color = '#555';
        link.style.textDecoration = 'none';

        row.appendChild(strong);
        row.appendChild(br);
        row.appendChild(link);
        box.appendChild(row);
      });
    })
    .catch(() => {
      box.textContent = 'ë©”ì¼ ë¡œë“œ ì‹¤íŒ¨';
    });
}

/* =====================
   NEWS API
===================== */
const FUP_NEWS_API =
  'https://api.rss2json.com/v1/api.json?rss_url=' +
  encodeURIComponent(
    'https://news.google.com/rss/search?q=ì—í”„ìœ í”¼ê¸€ë¡œë²ŒíŒŒíŠ¸ë„ˆìŠ¤&hl=ko&gl=KR&ceid=KR:ko'
  );

const WHYNOT_NEWS_API =
  'https://api.rss2json.com/v1/api.json?rss_url=' +
  encodeURIComponent(
    'https://news.google.com/rss/search?q=ì™€ì´ë‚«ê¸€ë¡œë²Œì´ë‹ˆì…”í‹°ë¸Œ&hl=ko&gl=KR&ceid=KR:ko'
  );

function loadNews(apiUrl, targetId) {
  const container = document.getElementById(targetId);
  if (!container) return;

  fetch(apiUrl)
    .then(res => res.json())
    .then(data => {
      container.innerHTML = '';

      if (!data.items || data.items.length === 0) {
        container.innerHTML = '<div>ê´€ë ¨ ë‰´ìŠ¤ ì—†ìŒ</div>';
        return;
      }

      data.items.slice(0, 3).forEach(item => {
        const div = document.createElement('div');
        div.style.marginBottom = '6px';

        const a = document.createElement('a');
        a.href = item.link;
        a.target = '_blank';
        a.textContent = item.title.replace(/<[^>]*>/g, '');
        a.style.color = '#111';
        a.style.textDecoration = 'none';

        div.appendChild(a);
        container.appendChild(div);
      });
    })
    .catch(() => {
      container.innerHTML = '<div>ë‰´ìŠ¤ ë¡œë“œ ì‹¤íŒ¨</div>';
    });
}

/* =====================
   DASHBOARD INIT
===================== */
function initDashboard() {
  // ë‚ ì§œ
  document.getElementById('today').innerText =
    new Date().toLocaleDateString('ko-KR', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      weekday: 'short'
    });

  // ë©”ì¼
  renderMail(MAIL_APIS.gmail_personal);
  renderMail(MAIL_APIS.gmail_company);

  // ë‰´ìŠ¤
  loadNews(FUP_NEWS_API, 'news_fup');
  loadNews(WHYNOT_NEWS_API, 'news_whynot');

  // ë‰´ìŠ¤ ì‹œê°„
  document.getElementById('newsUpdated').innerText =
    new Date().toLocaleTimeString('ko-KR', {
      hour: '2-digit',
      minute: '2-digit'
    });
}

/* =====================
   DOM READY
===================== */
document.addEventListener('DOMContentLoaded', () => {
  if (localStorage.getItem('ceo_unlocked') === 'true') {
    document.getElementById('lockScreen').style.display = 'none';
    initDashboard();
  }
});
</script>
</body>
</html>
